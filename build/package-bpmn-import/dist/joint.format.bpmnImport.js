/*! JointJS+ v4.0.1 - HTML5 Diagramming Framework - TRIAL VERSION

Copyright (c) 2024 client IO

 2024-10-07 


This Source Code Form is subject to the terms of the JointJS+ Trial License
, v. 2.0. If a copy of the JointJS+ License was not distributed with this
file, You can obtain one at https://www.jointjs.com/license
 or from the JointJS+ archive as was distributed by client IO. See the LICENSE file.*/


((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).joint=e.joint||{},e.joint.format=e.joint.format||{}))})(this,function(e){let r={decisiveElements:{participant:"participant",task:"task",serviceTask:"serviceTask",sendTask:"sendTask",receiveTask:"receiveTask",userTask:"userTask",manualTask:"manualTask",businessRuleTask:"businessRuleTask",scriptTask:"scriptTask",subProcess:"subProcess",callActivity:"callActivity",startEvent:"startEvent",intermediateThrowEvent:"intermediateThrowEvent",intermediateCatchEvent:"intermediateCatchEvent",boundaryEvent:"boundaryEvent",endEvent:"endEvent",gateway:"gateway",parallelGateway:"parallelGateway",inclusiveGateway:"inclusiveGateway",complexGateway:"complexGateway",eventBasedGateway:"eventBasedGateway",exclusiveGateway:"exclusiveGateway",sequenceFlow:"sequenceFlow",messageFlow:"messageFlow",dataObject:"dataObject",textAnnotation:"textAnnotation",association:"association"},processXML(t){let e=[],a=e=>{e=e.localName;return this.decisiveElements.hasOwnProperty(e)},r=t=>{if(a(t)&&e.push(t),0<t.childElementCount)for(let e=0;e<t.children.length;e++)r(t.children[e])};for(let e=0;e<t.children.length;e++)r(t.children[e]);return e.sort((e,t)=>null!==e.getAttribute("attachedToRef")&&null===t.getAttribute("attachedToRef")?1:null===e.getAttribute("attachedToRef")&&null!==t.getAttribute("attachedToRef")?-1:"participant"===e.localName||"subProcess"===e.localName||"participant"!==t.localName&&"subProcess"!==t.localName?"participant"!==e.localName&&"subProcess"!==e.localName||"participant"===t.localName||"subProcess"===t.localName?0:-1:1),e}};class m extends Error{}let l={events:{start:{"":["none","single","solid"],message:["message1","single","solid"],timer:["timer1","single","solid"],error:["error1","single","solid"],escalation:["escalation1","single","solid"],compensate:["compensation1","single","solid"],conditional:["conditional1","single","solid"],signal:["signal1","single","solid"],multiple:["multiple1","single","solid"],parallelMultiple:["parallel1","single","solid"]},intermediateCatch:{message:["message1","double","solid"],timer:["timer1","double","solid"],error:["error1","double","solid"],escalation:["escalation1","double","solid"],cancel:["cancel1","double","solid"],compensate:["compensation1","double","solid"],conditional:["conditional1","double","solid"],link:["link1","double","solid"],signal:["signal1","double","solid"],multiple:["multiple1","double","solid"],parallelMultiple:["parallel1","double","solid"]},intermediateThrow:{"":["none","double","solid"],message:["message2","double","solid"],escalation:["escalation2","double","solid"],compensate:["compensation2","double","solid"],link:["link2","double","solid"],signal:["signal2","double","solid"],multiple:["multiple2","double","solid"]},boundary:{message:["message1","double",["solid","dashed"]],timer:["timer1","double",["solid","dashed"]],error:["error1","double","solid"],escalation:["escalation1","double",["solid","dashed"]],cancel:["cancel1","double","solid"],compensate:["compensation1","double","solid"],conditional:["conditional1","double",["solid","dashed"]],link:["link1","double","solid"],signal:["signal1","double",["solid","dashed"]],multiple:["multiple1","double",["solid","dashed"]],parallelMultiple:["parallel1","double",["solid","dashed"]]},end:{"":["none","thick","solid"],message:["message2","thick","solid"],error:["error2","thick","solid"],escalation:["escalation2","thick","solid"],cancel:["cancel2","thick","solid"],compensate:["compensation2","thick","solid"],signal:["signal2","thick","solid"],terminate:["termination2","thick","solid"],multiple:["multiple2","thick","solid"]}},activities:{businessRule:"business-rule",manual:"manual",receive:"receive",script:"script",send:"send",service:"service",user:"user"},gateways:{complex:"complex",eventBased:"event",exclusive:"exclusive",inclusive:"inclusive",parallel:"parallel"}};var t={createPool:function(e,o,t){var a=e.getAttribute("id"),r=o.getElementById(e.getAttribute("processRef"));if(null===r)throw new m(`Missing a processRef attribute in the participant with id: ${a}. The import of participants without a referenced process is not supported.`);var i=o.querySelector(`BPMNDiagram BPMNShape[bpmnElement=${a}] Bounds`);if(null===i)throw new m(`Missing a BPMNShape element related to the participant with id: ${a}. The import of participants without a shape is not supported.`);let s=[];a=r.querySelectorAll(":scope > laneSet > lane");if(0<a.length){let i=e=>{let r=[];return e.forEach(e=>{var t=e.getAttribute("id"),a=o.querySelector(`BPMNDiagram BPMNShape[bpmnElement=${t}] Bounds`),t={id:t,label:e.getAttribute("name"),size:parseFloat(a.getAttribute("height")),y:parseFloat(a.getAttribute("y"))},a=e.querySelector("childLaneSet");null!==a&&(e=a.querySelectorAll(":scope > lane"),t.sublanes=i(e)),r.push(t)}),r.sort((e,t)=>e.y<t.y?-1:e.y===t.y?0:1),r};s=i(a)}a={};return null!==e.getAttribute("name")&&(a.headerLabel={text:e.getAttribute("name")}),new t({id:r.getAttribute("id"),position:{x:parseFloat(i.getAttribute("x")),y:parseFloat(i.getAttribute("y"))},size:{width:parseFloat(i.getAttribute("width")),height:parseFloat(i.getAttribute("height"))},attrs:a,lanes:0<s.length?s:null})},createActivity:function(e,t,a){var r,i=e.localName,o=e.getAttribute("id"),t=t.querySelector(`BPMNDiagram BPMNShape[bpmnElement=${o}]`).querySelector("Bounds"),e={label:{text:e.getAttribute("name")||void 0}};return"task"!==i&&(r=i.substring(0,i.length-4),void 0!==l.activities[r])&&(e.icon={iconType:l.activities[r]}),"callActivity"===i&&(e.border={borderType:"thick"}),new a({id:o,position:{x:parseFloat(t.getAttribute("x")),y:parseFloat(t.getAttribute("y"))},size:{width:parseFloat(t.getAttribute("width")),height:parseFloat(t.getAttribute("height"))},attrs:e})},createEvent:function(t,e,a){var r=t.localName,i=t.getAttribute("id"),e=e.querySelector(`BPMNDiagram BPMNShape[bpmnElement=${i}]`).querySelector("Bounds"),o={label:{text:t.getAttribute("name")||null}};if("event"!==r){var r=r.substring(0,r.length-5),s=t.querySelector(["message","timer","error","escalation","cancel","compensate","conditional","link","signal","terminate","multiple","parallelMultiple"].map(e=>e+"EventDefinition").join(","));let e="";null!==s&&(s=s.localName,e=s.substring(0,s.length-15));s=l.events?.[r]?.[e];void 0!==s&&(o.icon={iconType:s[0]},o.border={borderType:s[1]},"boundary"===r&&Array.isArray(s[2])?o.border.borderStyle="false"!==t.getAttribute("cancelActivity")?s[2][0]:s[2][1]:o.border.borderStyle=s[2])}return new a({id:i,position:{x:parseFloat(e.getAttribute("x")),y:parseFloat(e.getAttribute("y"))},size:{width:parseFloat(e.getAttribute("width")),height:parseFloat(e.getAttribute("height"))},attrs:o})},createGateway:function(t,e,a){var r=t.localName,i=t.getAttribute("id"),e=e.querySelector(`BPMNDiagram BPMNShape[bpmnElement=${i}]`).querySelector("Bounds"),o={label:{text:t.getAttribute("name")||null}};if("gateway"!==r){r=r.substring(0,r.length-7);if(void 0!==l.gateways[r]){let e;e="eventBased"===r&&"true"===t.getAttribute("instantiate")?"exclusive_event":l.gateways[r],o.icon={iconType:e}}}return new a({id:i,position:{x:parseFloat(e.getAttribute("x")),y:parseFloat(e.getAttribute("y"))},size:{width:parseFloat(e.getAttribute("width")),height:parseFloat(e.getAttribute("height"))},attrs:o})},createFlow:function(e,t,a){var r=e.localName,i=e.getAttribute("id"),o=e.getAttribute("sourceRef"),s=e.getAttribute("targetRef");let l=o,n=s;var c={};if("messageFlow"===r){c.line={flowType:"message"};r=t.getElementById(o);if("participant"===r.localName){r=r.getAttribute("processRef");if(null===r)throw new m(`Missing a processRef attribute in the participant with id: ${o}. The import of participants without a referenced process is not supported.`);l=r}r=t.getElementById(s);if("participant"===r.localName){r=r.getAttribute("processRef");if(null===r)throw new m(`Missing a processRef attribute in the participant with id: ${s}. The import of participants without a referenced process is not supported.`);n=r}}let u=[];var d,r={id:l},p={id:n},i=t.querySelector(`BPMNDiagram BPMNEdge[bpmnElement=${i}]`),s=(null!==i&&(o=t.querySelector(`BPMNDiagram BPMNShape[bpmnElement=${o}] Bounds`),t=t.querySelector(`BPMNDiagram BPMNShape[bpmnElement=${s}] Bounds`),i=(s=Array.from(i.querySelectorAll("waypoint"))).shift(),d=s.pop(),s.forEach(e=>u.push({x:parseFloat(e.getAttribute("x")),y:parseFloat(e.getAttribute("y"))})),r.anchor={name:"modelCenter",args:{dx:parseFloat(i.getAttribute("x"))-(parseFloat(o.getAttribute("x"))+parseFloat(o.getAttribute("width"))/2),dy:parseFloat(i.getAttribute("y"))-(parseFloat(o.getAttribute("y"))+parseFloat(o.getAttribute("height"))/2)}},p.anchor={name:"modelCenter",args:{dx:d.getAttribute("x")-(parseFloat(t.getAttribute("x"))+parseFloat(t.getAttribute("width"))/2),dy:d.getAttribute("y")-(parseFloat(t.getAttribute("y"))+parseFloat(t.getAttribute("height"))/2)}}),[]);return null!==e.getAttribute("name")&&s.push({attrs:{label:{text:e.getAttribute("name")}}}),new a({vertices:u,source:r,target:p,attrs:c,labels:s})},createDataObject:function(e,t,a){var e=e.getAttribute("id"),r=t.querySelector(`process dataObjectReference[dataObjectRef=${e}]`),i=r.getAttribute("id"),t=t.querySelector(`BPMNDiagram BPMNShape[bpmnElement=${i}]`).querySelector("Bounds"),i={label:{text:r.getAttribute("name")||void 0}};return new a({id:e,position:{x:parseFloat(t.getAttribute("x")),y:parseFloat(t.getAttribute("y"))},size:{width:parseFloat(t.getAttribute("width")),height:parseFloat(t.getAttribute("height"))},attrs:i})},createAnnotation:function(e,t,a){var r=e.getAttribute("id"),t=t.querySelector(`BPMNDiagram BPMNShape[bpmnElement=${r}]`).querySelector("Bounds"),e={label:{text:e.querySelector(":scope > text").textContent}};return new a({id:r,position:{x:parseFloat(t.getAttribute("x")),y:parseFloat(t.getAttribute("y"))},size:{width:parseFloat(t.getAttribute("width")),height:parseFloat(t.getAttribute("height"))},attrs:e})},createAnnotationLink:function(e,t,a){var r=e.getAttribute("id"),i=e.getAttribute("sourceRef"),e=e.getAttribute("targetRef"),o=t.getElementById(i),o="participant"===o.localName?o.getAttribute("processRef"):i,s=t.getElementById(e),s="participant"===s.localName?s.getAttribute("processRef"):e,i=t.querySelector(`BPMNDiagram BPMNShape[bpmnElement=${i}] Bounds`),e=t.querySelector(`BPMNDiagram BPMNShape[bpmnElement=${e}] Bounds`),t=t.querySelector(`BPMNDiagram BPMNEdge[bpmnElement=${r}]`),r=Array.from(t.querySelectorAll("waypoint")),t=r.shift(),l=r.pop();let n=[];return r.forEach(e=>n.push({x:parseFloat(e.getAttribute("x")),y:parseFloat(e.getAttribute("y"))})),new a({vertices:n,source:{id:o,anchor:{name:"modelCenter",args:{dx:parseFloat(t.getAttribute("x"))-(parseFloat(i.getAttribute("x"))+parseFloat(i.getAttribute("width"))/2),dy:parseFloat(t.getAttribute("y"))-(parseFloat(i.getAttribute("y"))+parseFloat(i.getAttribute("height"))/2)}}},target:{id:s,anchor:{name:"modelCenter",args:{dx:l.getAttribute("x")-(parseFloat(e.getAttribute("x"))+parseFloat(e.getAttribute("width"))/2),dy:l.getAttribute("y")-(parseFloat(e.getAttribute("y"))+parseFloat(e.getAttribute("height"))/2)}}}})}};let h=r.decisiveElements,y={[h.participant]:t.createPool,[h.task]:t.createActivity,[h.serviceTask]:t.createActivity,[h.sendTask]:t.createActivity,[h.receiveTask]:t.createActivity,[h.userTask]:t.createActivity,[h.manualTask]:t.createActivity,[h.businessRuleTask]:t.createActivity,[h.scriptTask]:t.createActivity,[h.subProcess]:t.createActivity,[h.callActivity]:t.createActivity,[h.startEvent]:t.createEvent,[h.intermediateThrowEvent]:t.createEvent,[h.intermediateCatchEvent]:t.createEvent,[h.boundaryEvent]:t.createEvent,[h.endEvent]:t.createEvent,[h.gateway]:t.createGateway,[h.parallelGateway]:t.createGateway,[h.inclusiveGateway]:t.createGateway,[h.complexGateway]:t.createGateway,[h.eventBasedGateway]:t.createGateway,[h.exclusiveGateway]:t.createGateway,[h.sequenceFlow]:t.createFlow,[h.messageFlow]:t.createFlow,[h.dataObject]:t.createDataObject,[h.textAnnotation]:t.createAnnotation,[h.association]:t.createAnnotationLink};function s(i,e){var o=n();return(s=function(e,t){var a=o[e-=242];void 0===s.nPppTV&&(s.PKopZL=function(e,t){var a,r=[],i=0,o="";for(e=(e=>{for(var t,a,r="",i="",o=0,s=0;a=e.charAt(s++);~a&&(t=o%4?64*t+a:a,o++%4)&&(r+=String.fromCharCode(255&t>>(-2*o&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var l=0,n=r.length;l<n;l++)i+="%"+("00"+r.charCodeAt(l).toString(16)).slice(-2);return decodeURIComponent(i)})(e),s=0;s<256;s++)r[s]=s;for(s=0;s<256;s++)i=(i+r[s]+t.charCodeAt(s%t.length))%256,a=r[s],r[s]=r[i],r[i]=a;for(var s=0,i=0,l=0;l<e.length;l++)a=r[s=(s+1)%256],r[s]=r[i=(i+r[s])%256],r[i]=a,o+=String.fromCharCode(e.charCodeAt(l)^r[(r[s]+r[i])%256]);return o},i=arguments,s.nPppTV=!0);var e=e+o[0],r=i[e];return r?a=r:(void 0===s.PaMhbQ&&(s.PaMhbQ=!0),a=s.PKopZL(a,t),i[e]=a),a})(i,e)}e.fromBPMN=function(c){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=new Set,l=Object.assign({},y,t.cellFactories),u={},n={},a={},d={},p=[],g=(t,e)=>{null!==e&&(d.hasOwnProperty(e)?d[e].embed(t):(a.hasOwnProperty(e)||(a[e]=[]),a[e].push(t))),a.hasOwnProperty(t.id)&&(a[t.id].forEach(e=>{t.embed(e)}),delete a[t.id])},b=e=>{if("function"!=typeof t.bpmn2Shapes[e])throw new m(`Missing type ${e} in the given BPMN 2 shapes set`);return t.bpmn2Shapes[e]};r.processXML(c).forEach(r=>{let i=r.localName;if("function"==typeof l[i]){let a;try{let e=(e=>{switch(e){case h.participant:return b("HeaderedPool");case h.task:case h.serviceTask:case h.sendTask:case h.receiveTask:case h.userTask:case h.manualTask:case h.businessRuleTask:case h.scriptTask:case h.subProcess:case h.callActivity:return b("Activity");case h.startEvent:case h.intermediateThrowEvent:case h.intermediateCatchEvent:case h.boundaryEvent:case h.endEvent:return b("Event");case h.gateway:case h.parallelGateway:case h.inclusiveGateway:case h.complexGateway:case h.eventBasedGateway:case h.exclusiveGateway:return b("Gateway");case h.sequenceFlow:case h.messageFlow:return b("Flow");case h.dataObject:return b("DataObject");case h.textAnnotation:return b("Annotation");case h.association:return b("AnnotationLink");default:throw new m("Missing type for the given XML element: "+e)}})(i);a=l[i](r,c,e,()=>y[i](r,c,e))}catch(e){if(e instanceof m)s.add(e.message);else{var o=r.getAttribute("id");let e="An error occurred during the import of the element "+i;null!==o&&(e+=`(#${o})`),s.add(e)}a=null}if(null!==a){d[a.id]=a,p.push(a);let e=null;var o=r.getAttribute("attachedToRef");null!==o?e=o:void 0===r.parentElement||"process"!==(o=r.parentElement.localName)&&o!==h.subProcess||(e=r.parentElement.getAttribute("id")),g(a,e);let t=r.getAttribute("id");i===h.dataObject&&(o=c.querySelector(`process dataObjectReference[dataObjectRef=${t}]`),u[o.getAttribute("id")]=t);o=r.querySelectorAll("dataInputAssociation, dataOutputAssociation");0<o.length&&(n.hasOwnProperty(t)||(n[t]=[]),o.forEach(e=>n[t].push(e)))}}});for(let t in n)n[t].forEach(e=>{var a=e.localName,r=e.getAttribute("id");let i,o;"dataOutputAssociation"===a?(i=t,o=u[e.querySelector("targetRef").textContent]):"dataInputAssociation"===a&&(i=u[e.querySelector("sourceRef").textContent],o=t);a=d[i],e=d[o];if(void 0!==a&&void 0!==e){var s=c.querySelector(`BPMNDiagram BPMNEdge[bpmnElement=${r}]`),s=Array.from(s.querySelectorAll("waypoint")),l=s.shift(),n=s.pop();let t=[];s.forEach(e=>t.push({x:parseFloat(e.getAttribute("x")),y:parseFloat(e.getAttribute("y"))}));s=new(b("DataAssociation"))({vertices:t,source:{id:i,anchor:{name:"modelCenter",args:{dx:parseFloat(l.getAttribute("x"))-a.getBBox().center().x,dy:parseFloat(l.getAttribute("y"))-a.getBBox().center().y}}},target:{id:o,anchor:{name:"modelCenter",args:{dx:parseFloat(n.getAttribute("x"))-e.getBBox().center().x,dy:parseFloat(n.getAttribute("y"))-e.getBBox().center().y}}}}),l=(d[r]=s,p.push(s),e.getParentCell()),a=null!==l?l.get("id"):null;g(s,a)}});return{cells:p.filter(e=>!e.isLink()||e.source().id in d&&e.target().id in d||(s.add(`Link with id ${e.id} could not be imported, either its destination or source is missing or it was not imported successfully.`),!1)),errors:[...s]}};var a,i,t=s;function n(){var e=["WPlcRSo/E8oSWPhcHZ/cP3fkCa","WO/cMmkzW6GqW7JcSwhcNCk9l8oFmW","WPVcKbi5F1SWf2q","WOVcL8kBW6ivW73cSaVdSSoUESkWsq","BfRcK8kGW5aIW4jSWPWq","W6NcOanKDvpdMaNcTL8","iW7cJutcSSkQWRygwLtdGceryeOtoCkpWR3dII7dUqVcOtZdKCobAMBdH35zWRlcON1FFSoEW5GyWQfiW4GBuX/dLmomWOvYWPa+WPxdVsddTh0DWPy+he4XW6inWOWzy8osWPhdOrddLv9kWQZcGfzxW5ddGCohWQ9IW6NcKxm2lZSKW4v2eL0","rN7dISo2WQDSWRhdVCoJxt3dJG","WQ3dOmoHo8oDoY7cQmkNWRJdSCkh","kSoEbSoHW59bWRtdUmoDBq","smo6rM52kX7dRCkfbmke","W7BdNSo2W47cVmowWPBcQZSUDSoM","ESkAEtpcL0W6B8kg","DWBcI8owWRyvja","mXVcPmkDWQtcMbaHwhz4W7q","hSo6WPvVW5v2nSoIWRO","bmkFW5BcVCkoy8oCbSkpW7G","bmkAWPFdSmkArSo2eW","W4GpC3HVm8kZ","dmkjW67dOcu+W7K5W4L5dbqh","DLlcMmo/z8kPcG45jmkHWRKJ","W7tcNs3cTmkBW5dcVa","dMyDmeXNW4K1W5hdQq/cVq","W4ldVmk4g8k8W4tcHq","zq/cLWpdQh7dJImfWP0p","F8kyEuhdMq4/x8khhxCV","AfxcK8kMWPnBWRfSWPi1Bq1F","W77cU8kXCCkB","WRKdlvO+pgnKhmoR","qSozW77dTK59obzH"];return(n=function(){return e})()}for(var o=s,c=n();;)try{if(680709==+parseInt(o(258,"Zj*X"))*(-parseInt(o(262,"nvPS"))/2)+parseInt(o(260,"yw#("))/3*(-parseInt(o(257,"C9@]"))/4)+parseInt(o(271,"4rsO"))/5+parseInt(o(249,"hQZ8"))/6*(-parseInt(o(264,"Dt5P"))/7)+-parseInt(o(265,"nH!J"))/8*(parseInt(o(252,"nH!J"))/9)+parseInt(o(242,"M]l1"))/10*(-parseInt(o(251,"chc5"))/11)+parseInt(o(244,"5ULV"))/12*(parseInt(o(254,"(!G6"))/13))break;c.push(c.shift())}catch(e){c.push(c.shift())}e=new Date(parseInt(t(243,"4rsO"))),a=parseInt(t(245,"U!@6")),t=t(246,"L1Yt"),(i=s)(269,"9$mK")!=typeof window&&a&&!isNaN(a)&&e&&!isNaN(e[i(263,"5YuD")]())&&e[i(261,"Ip)F")]()+a-(new Date)[i(253,"@DVr")]()<=0&&window[i(267,"8wL9")](t)});